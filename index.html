<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Hexo</title><meta name="author" content="hakusai"><meta name="copyright" content="hakusai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg">
<meta property="article:author" content="hakusai">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg"><link rel="shortcut icon" href="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg"><link rel="canonical" href="http://example.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hexo',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-06-18 15:22:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><hr/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hexo</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Hexo</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/18/hello-world/" title="Hello World"><img class="post_bg" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/18/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-06-18T05:24:37.039Z" title="Created 2022-06-18 13:24:37">2022-06-18</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/09/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="ThreadPoolExecutor-线程池"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/772493.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ThreadPoolExecutor-线程池"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="ThreadPoolExecutor-线程池">ThreadPoolExecutor-线程池</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-07T06:43:44.000Z" title="Created 2021-09-07 14:43:44">2021-09-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">源码分析</a></span></div><div class="content">一. Java中有哪些方法获取多线程  1.  实现Runnable接口
  2.  实现Callable接口
  3.  实例化Thread类
  4.  使用线程池获取

①. 实现Runnable接口12345678910/** * 实现Runnable接口 */class MyThread implements Runnable &#123;    @Override    public void run() &#123;    &#125;&#125;

①. 实现Callable接口
实现Callable接口，也需要实现call方法，但是这个时候我们还需要有返回值，这个Callable接口的应用场景一般就在于批处理业务，比如转账的时候，需要给一会返回结果的状态码回来，代表本次操作成功还是失败


12345678910111213/** * Callable有返回值 * 批量处理的时候，需要带返回值的接口（例如支付失败的时候，需要返回错误状态） * */class MyThread2 implements Callable&lt;Integer&gt; &#123;     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/09/06/MySQL-%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/" title="MySQL-索引相关优化"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/885936.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL-索引相关优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/06/MySQL-%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/" title="MySQL-索引相关优化">MySQL-索引相关优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-06T07:43:44.000Z" title="Created 2021-09-06 15:43:44">2021-09-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="content">一. 验证索引提升查询效率
 根据ID 和name 进行精确查询查询 


二. 索引的使用_准备环境
 创建联合索引


1create index idx_seller_name_sta_addr on tb_seller(name,status,address);


 创建表和插入数据


123456789101112131415161718192021222324create table `tb_seller` (	`sellerid` varchar (100),	`name` varchar (100),	`nickname` varchar (50),	`password` varchar (60),	`status` varchar (1),	`address` varchar (100),	`createtime` datetime,    primary key(`sellerid`))engine=innodb default charset=utf8mb4; insert into `tb_seller` (`sellerid`, `name`, `nick ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/09/04/ConcurrentHashMap---JDK1.8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="ConcurrentHashMap源码分析-Jdk1.8"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/737487.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ConcurrentHashMap源码分析-Jdk1.8"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/04/ConcurrentHashMap---JDK1.8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="ConcurrentHashMap源码分析-Jdk1.8">ConcurrentHashMap源码分析-Jdk1.8</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-04T06:43:44.000Z" title="Created 2021-09-04 14:43:44">2021-09-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">源码分析</a></span></div><div class="content">一. ConcurrentHashMap源码分析—Jdk1.8①. ConcurrentHashMap底层数据结构
ConcurrentHashMap相比HashMap而言，是多线程安全的，其底层数据与HashMap的数据结构相同


 数组+链表+红黑树来实现的，使用了CAS的方式和Synchronized加锁来保证线程的安全。


②. ConcurrentHashMap基本属性
对于ConcurrentHashMap而言，添加了Unsafe实例，主要用于反射获取对象相应的字段。


12345678910111213141516171819202122232425262728293031323334353637383940//版本号private static final long serialVersionUID = 7249069246763182397L;// node数组最大容量：2^30=1073741824private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;// 默认初始值，必须是2的幂数private  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-RDB%20%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-RDB 持久化"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/772493.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis持久化-RDB 持久化"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-RDB%20%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-RDB 持久化">Redis持久化-RDB 持久化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-01T04:43:44.000Z" title="Created 2021-09-01 12:43:44">2021-09-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Redis/">Redis</a></span></div><div class="content">一. RDB 简介
RDB是Redis用来进行持久化的一种方式，是把当前内存中的数据集快照写入磁盘，也就是 Snapshot 快照（数据库中所有键值对数据）。恢复时是将快照文件直接读到内存里。

二. 触发方式①. 自动触发
1. save
这里是用来配置触发 Redis的 RDB 持久化条件，也就是什么时候将内存中的数据保存到硬盘。比如“save m n”。表示m秒内数据集存在n次修改时，自动触发bgsave（这个命令下面会介绍，手动触发RDB持久化的命令）

默认如下配置：
123save 900 1：表示900 秒内如果至少有 1 个 key 的值变化，则保存save 300 10：表示300 秒内如果至少有 10 个 key 的值变化，则保存save 60 10000：表示60 秒内如果至少有 10000 个 key 的值变化，则保存

2. stop-writes-on-bgsave-error
默认值为yes。当启用了RDB且最后一次后台保存数据失败，Redis是否停止接收数据。这会让用户意识到数据没有正确持久化到磁盘上，否则没有人会注意到灾难（disaster）发生了。如 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-AOF%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-AOF持久化"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/227944.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis持久化-AOF持久化"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-AOF%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-AOF持久化">Redis持久化-AOF持久化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-09-01T04:43:44.000Z" title="Created 2021-09-01 12:43:44">2021-09-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Redis/">Redis</a></span></div><div class="content">一. AOF简介
与内存快照保存当前内存中的数据所不同，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的。即每执行一个命令，就会把该命令写到日志文件里。

二. AOF 配置①. appendonly：默认值为no
也就是说redis 默认使用的是rdb方式持久化，如果想要开启 AOF 持久化方式，需要将 appendonly 修改为 yes。

②. appendfilename ：aof文件名
默认是”appendonly.aof”

③、appendfsync：aof持久化策略的配置
no 表示不执行fsync，由操作系统保证数据同步到磁盘，速度最快，但是不太安全；

always 表示每次写入都执行fsync，以保证数据同步到磁盘，效率很低；

everysec 表示每秒执行一次fsync，可能会导致丢失这1s数据。通常选择 everysec ，兼顾安全性和效率。



④、no-appendfsync-on-rewrite：默认值为no。
在aof重写或者写入rdb文件的时候，会执行大量IO，此时对于everysec和always的aof模式来说，执行f ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/08/29/G1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="G1垃圾回收器"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/185425.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="G1垃圾回收器"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/29/G1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="G1垃圾回收器">G1垃圾回收器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-08-29T04:43:44.000Z" title="Created 2021-08-29 12:43:44">2021-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JVM/">JVM</a></span></div><div class="content">一. G1垃圾回收器介绍
Garbage First 简称 G1，是继 CMS 垃圾回收器之后，又一款并发的垃圾回收器。
在 JDK7 中被去掉 Experimental 标识，开始可以被正式使用
在 JDK9 中被 JVM 设置为默认的垃圾回收器。G1 是垃圾收集器发展史上的一个新的里程碑
它采用分区算法，基于 Region 的内存布局方式，对整个堆内存进行局部回收，既能回收新生代，也能回收老年代。
G1 垃圾回收器的目标是在期望的停顿时间内，尽可能地提高系统的吞吐量。

二. G1的使用
-XX:+UseG1GC  -Xmx32g    -XX:MaxGCPauseMillis&#x3D;200


-XX:+UseG1GC为开启G1垃圾收集器
-Xmx32g 设计堆内存的最大内存为32G
-XX:MaxGCPauseMillis&#x3D;200设置GC的最大暂停时间为200ms。

三. G1的特点①. Region 分区产生
G1将新生代，老年代的物理空间划分取消了，取而代之的是，G1算法将堆划分为若干个区域（Region），它仍然属于分代收集器。
虽然 G1 仍然遵循分代收 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/08/19/CMS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="CMS垃圾回收器"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/606036.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CMS垃圾回收器"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/19/CMS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="CMS垃圾回收器">CMS垃圾回收器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-08-19T06:43:44.000Z" title="Created 2021-08-19 14:43:44">2021-08-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JVM/">JVM</a></span></div><div class="content">一. CMS介绍
JDK9 中，CMS 被标记为「Deprecated」，开始逐渐的淡出人们的视野，在目前最新的 JDK14 中，CMS 则是完全被移除了，成为了第一款被彻底遗弃的垃圾回收器。
CMS(Concurrent Mark-Sweep)是以牺牲吞吐量为代价来获得最短回收停顿时间的垃圾回收器。
在启动JVM参数加上-XX:+UseConcMarkSweepGC ，这个参数表示对于老年代的回收采用CMS。
CMS采用的基础算法是：标记—清除。

二. 实现机制
根据GC的触发机制分为：周期性Old GC（被动）和主动Old GC

三. 周期性Old GC_CMS执行过程
周期性Old GC，执行的逻辑也叫Background Collect，对老年代进行回收，在GC日志中比较常见，由后台线程ConcurrentMarkSweepThread循环判断（默认2s）是否需要触发。


 触发的条件


如果没有设置-XX:+UseCMSInitiatingOccupancyOnly，虚拟机会根据收集的数据决定是否触发。
老年代使用率达到阈值 CMSInitiatingOccupanc ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/08/16/MySQL-Explain%E5%88%86%E6%9E%90%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/" title="MySQL-Explain分析执行计划"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/889639.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL-Explain分析执行计划"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/16/MySQL-Explain%E5%88%86%E6%9E%90%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/" title="MySQL-Explain分析执行计划">MySQL-Explain分析执行计划</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-08-16T02:43:44.000Z" title="Created 2021-08-16 10:43:44">2021-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="content">一. 查看SQL执行频率
MySQL 客户端连接成功后，通过 show [session|global] status 命令可以提供服务器状态信息。show [session|global] status 可以根据需要加上参数“session”或者“global”来显示 session 级（当前连接）的计结果和 global 级（自数据库上次启动至今）的统计结果。如果不写，默认使用参数是“session”。12345678show status like &#x27;Com_______&#x27;;show GLOBAL status like &#x27;Com_______&#x27;;show status like &#x27;Innodb_rows_%&#x27;;SELECT * from goods_innodb;




Com_***      :  这些参数对于所有存储引擎的表操作都会进行累计。

Innodb_*** :  这几个参数只是针对InnoDB 存储引擎的，累加的算法也略有不同。


二. 定位低效率执行SQL①. 慢查询日志
慢查询日志 : 通过慢查 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/08/12/ThreadLocal/" title="ThreadLocal源码分析"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/136550.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ThreadLocal源码分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/12/ThreadLocal/" title="ThreadLocal源码分析">ThreadLocal源码分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-08-12T06:43:44.000Z" title="Created 2021-08-12 14:43:44">2021-08-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">源码分析</a></span></div><div class="content">一. ThreadLocal源码分析
①. 核心属性
123456//定义了一个AtomicInteger类型,每次获取当前值并加上HASH_INCREMENTprivate final int threadLocalHashCode = nextHashCode();//获取下一个hashCode值private static AtomicInteger nextHashCode = new AtomicInteger();//Hash值增长值private static final int HASH_INCREMENT = 0x61c88647;

②. get()方法
123456789101112131415161718192021//获取当前线程本地变量的值public T get() &#123;    //获取当前线程    Thread t = Thread.currentThread();    //获取当前线程的map    ThreadLocalMap map = getMap(t);    //判断当前线程的map是否存在，不为空    if (map != n ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">hakusai</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/06/18/hello-world/" title="Hello World"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2022/06/18/hello-world/" title="Hello World">Hello World</a><time datetime="2022-06-18T05:24:37.039Z" title="Created 2022-06-18 13:24:37">2022-06-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/09/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="ThreadPoolExecutor-线程池"><img src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/772493.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ThreadPoolExecutor-线程池"/></a><div class="content"><a class="title" href="/2021/09/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="ThreadPoolExecutor-线程池">ThreadPoolExecutor-线程池</a><time datetime="2021-09-07T06:43:44.000Z" title="Created 2021-09-07 14:43:44">2021-09-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/09/06/MySQL-%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/" title="MySQL-索引相关优化"><img src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/885936.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL-索引相关优化"/></a><div class="content"><a class="title" href="/2021/09/06/MySQL-%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96/" title="MySQL-索引相关优化">MySQL-索引相关优化</a><time datetime="2021-09-06T07:43:44.000Z" title="Created 2021-09-06 15:43:44">2021-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/09/04/ConcurrentHashMap---JDK1.8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="ConcurrentHashMap源码分析-Jdk1.8"><img src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/737487.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ConcurrentHashMap源码分析-Jdk1.8"/></a><div class="content"><a class="title" href="/2021/09/04/ConcurrentHashMap---JDK1.8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="ConcurrentHashMap源码分析-Jdk1.8">ConcurrentHashMap源码分析-Jdk1.8</a><time datetime="2021-09-04T06:43:44.000Z" title="Created 2021-09-04 14:43:44">2021-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-RDB%20%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-RDB 持久化"><img src="https://cdn.jsdelivr.net/gh/Y960303802/image/img2/772493.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis持久化-RDB 持久化"/></a><div class="content"><a class="title" href="/2021/09/01/Redis%E6%8C%81%E4%B9%85%E5%8C%96-RDB%20%E6%8C%81%E4%B9%85%E5%8C%96/" title="Redis持久化-RDB 持久化">Redis持久化-RDB 持久化</a><time datetime="2021-09-01T04:43:44.000Z" title="Created 2021-09-01 12:43:44">2021-09-01</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JVM/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"><span class="card-category-list-name">源码分析</span><span class="card-category-list-count">9</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/JAVA/"><span class="card-category-list-name">JAVA</span><span class="card-category-list-count">4</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/JVM/" style="font-size: 1.1em; color: #999">JVM</a> <a href="/tags/Java%E9%9B%86%E5%90%88/" style="font-size: 1.3em; color: #99a1ac">Java集合</a> <a href="/tags/MySQL/" style="font-size: 1.1em; color: #999">MySQL</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 1.5em; color: #99a9bf">源码分析</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">June 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">September 2021</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">August 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">April 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">April 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">16</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-06-18T07:22:56.669Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By hakusai</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>