<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Docker | hakusaiのblog</title><meta name="keywords" content="Docker"><meta name="author" content="hakusai"><meta name="copyright" content="hakusai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一. Docker镜像操作 镜像是一种轻量级的，可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时所需的库、环境变量和配置文件。  1.查看docker引擎以及docker帮助命令123docker version	----------------	查看docker的信息docker info		------------------">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker">
<meta property="og:url" content="http://hakusai.cn/2022/07/04/Docker/index.html">
<meta property="og:site_name" content="hakusaiのblog">
<meta property="og:description" content="一. Docker镜像操作 镜像是一种轻量级的，可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时所需的库、环境变量和配置文件。  1.查看docker引擎以及docker帮助命令123docker version	----------------	查看docker的信息docker info		------------------">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1a42f082b0648ed856d2655ed994b56~tplv-k3u1fbpfcp-watermark.image?">
<meta property="article:published_time" content="2022-07-04T02:20:10.000Z">
<meta property="article:modified_time" content="2022-07-07T14:10:51.314Z">
<meta property="article:author" content="hakusai">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1a42f082b0648ed856d2655ed994b56~tplv-k3u1fbpfcp-watermark.image?"><link rel="shortcut icon" href="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg"><link rel="canonical" href="http://hakusai.cn/2022/07/04/Docker/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-07 22:10:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://fastly.jsdelivr.net/gh/hakusai22/image/qq.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1a42f082b0648ed856d2655ed994b56~tplv-k3u1fbpfcp-watermark.image?')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">hakusaiのblog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-04T02:20:10.000Z" title="发表于 2022-07-04 10:20:10">2022-07-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-07T14:10:51.314Z" title="更新于 2022-07-07 22:10:51">2022-07-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Docker/">Docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一-Docker镜像操作"><a href="#一-Docker镜像操作" class="headerlink" title="一. Docker镜像操作"></a>一. Docker镜像操作</h1><ol>
<li>镜像是一种轻量级的，可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时所需的库、环境变量和配置文件。</li>
</ol>
<h2 id="1-查看docker引擎以及docker帮助命令"><a href="#1-查看docker引擎以及docker帮助命令" class="headerlink" title="1.查看docker引擎以及docker帮助命令"></a>1.查看docker引擎以及docker帮助命令</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version	----------------	查看docker的信息</span><br><span class="line">docker info		------------------	查看更详细的信息</span><br><span class="line">docker --help	-----------------	帮助命令</span><br></pre></td></tr></table></figure>


<h2 id="2-查看本机中所有镜像"><a href="#2-查看本机中所有镜像" class="headerlink" title="2.查看本机中所有镜像"></a>2.查看本机中所有镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker images	------------列出本地所有镜像</span><br><span class="line">				 -a			列出所有镜像（包含中间映像层）</span><br><span class="line"> 		 			 -q			只显示镜像id</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210104100143702.png" alt="在这里插入图片描述"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@docker ~]# docker images</span><br><span class="line">REPOSITORY       TAG             IMAGE ID       CREATED             SIZE</span><br><span class="line">mysql            5.7             f07dfa83b528   13 days ago         448MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#解释</span><br><span class="line">REPOSITORY   镜像的仓库源</span><br><span class="line">TAG          镜像的标签</span><br><span class="line">IMAGE ID    镜像的id</span><br><span class="line">CREATED      镜像的创建时间</span><br><span class="line">SIZE         镜像的大小</span><br></pre></td></tr></table></figure>


<h2 id="3-搜索镜像"><a href="#3-搜索镜像" class="headerlink" title="3.搜索镜像"></a>3.搜索镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search [options] 镜像名	---- 去dockerhub上查询当前镜像</span><br><span class="line">	--filter=STARS=指定值 	    ---- 列出收藏数不少于指定值的镜像</span><br><span class="line"> 	    --no-trunc	                ---- 显示完整的镜像信息</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104100756571.png" alt="在这里插入图片描述"></p>
<h2 id="4-从仓库下载镜像"><a href="#4-从仓库下载镜像" class="headerlink" title="4.从仓库下载镜像"></a>4.从仓库下载镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像名[:TAG|<span class="meta">@DIGEST</span>]	-------------- 下载镜像</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104100843373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5-删除镜像"><a href="#5-删除镜像" class="headerlink" title="5.删除镜像"></a>5.删除镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker image rm   镜像名:tag |镜像id</span><br><span class="line">docker image rm -f 镜像名:tag |镜像id (强制删除)</span><br><span class="line"></span><br><span class="line">docker rmi -f 镜像名:tag |镜像id (简化写法)</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104104540306.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="二-容器相关操作"><a href="#二-容器相关操作" class="headerlink" title="二.容器相关操作"></a>二.容器相关操作</h1><h2 id="1-运行容器"><a href="#1-运行容器" class="headerlink" title="1.运行容器"></a>1.运行容器</h2><blockquote>
<p>容器: 镜像每次运行之后就是产生一个容器,就是正在运行的镜像,特点就是可读可写</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run 镜像名	--------镜像名新建并启动容器</span><br><span class="line">   --name 					    别名为容器起一个名字</span><br><span class="line">   -d							启动守护式容器（在后台启动容器）</span><br><span class="line">   -p 							映射端口号：原始端口号------指定端口号启动</span><br></pre></td></tr></table></figure>

<p><font color='red' size=5> DockerHub上拉取tomcat，并运行起来</font><br><img src="https://img-blog.csdnimg.cn/20210104163219804.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><font color='red' size=5>1. 映射端口运行容器</font><br><img src="https://img-blog.csdnimg.cn/20210104155818655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><font color='red' size=5>2.  后台启动+映射端口启动容器</font></p>
<blockquote>
<p>docker run -d :p 8082:8080 tomcat:8.0-tre8-stim</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210104160033946.png" alt="在这里插入图片描述"><font color='red' size=5>3.  访问测试</font><br><img src="https://img-blog.csdnimg.cn/20210104161619233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-查看运行的容器"><a href="#2-查看运行的容器" class="headerlink" title="2.查看运行的容器"></a>2.查看运行的容器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps					--------------------------	列出所有正在运行的容器</span><br><span class="line">-a			正在运行的和历史运行过的容器</span><br><span class="line">-q			静默模式，只显示容器编号</span><br></pre></td></tr></table></figure>

<p><font color='red' size=5>1. 查看当前运行的容器</font></p>
<blockquote>
<p>docker ps</p>
<p><img src="https://img-blog.csdnimg.cn/20210104155803463.png" alt="在这里插入图片描述"><br><font color='red' size=5> 2. 正在运行的和历史运行过的容器</font><br>docker ps -a</p>
<p><img src="https://img-blog.csdnimg.cn/20210104160237478.png" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="3-停止-关闭-重启容器"><a href="#3-停止-关闭-重启容器" class="headerlink" title="3.停止|关闭|重启容器"></a>3.停止|关闭|重启容器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start   容器名字或者容器id  --------------- 开启容器</span><br><span class="line">docker restart 容器名或者容器id    --------------- 重启容器</span><br><span class="line">docker stop  容器名或者容器id 	    ------------------ 正常停止容器运行</span><br><span class="line">docker kill  容器名或者容器id      ------------------ 立即停止容器运行</span><br></pre></td></tr></table></figure>

<p><font color='red' size=5>1. 启动一个容器，其他的就不测试了</font></p>
<blockquote>
<pre><code>    docker start   容器名字或者容器id  --------------- 开启容器

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210104160523417.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70)
</code></pre>
</blockquote>
<h2 id="4-删除容器"><a href="#4-删除容器" class="headerlink" title="4.删除容器"></a>4.删除容器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f 容器id和容器名     </span><br><span class="line">docker rm -f $(docker ps -aq)	--------------------------	删除所有容器</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>docker rm -f $(docker ps -aq)</p>
<p><img src="https://img-blog.csdnimg.cn/20210104160655482.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="5-查看容器内进程"><a href="#5-查看容器内进程" class="headerlink" title="5.查看容器内进程"></a>5.查看容器内进程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top 容器id或者容器名 ------------------ 查看容器内的进程</span><br></pre></td></tr></table></figure>

<p>  <img src="https://img-blog.csdnimg.cn/20210104160806467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="6-查看查看容器内部细节"><a href="#6-查看查看容器内部细节" class="headerlink" title="6.查看查看容器内部细节"></a>6.查看查看容器内部细节</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器id 		------------------ 查看容器内部细节</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104160952467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="7-查看容器的运行日志"><a href="#7-查看容器的运行日志" class="headerlink" title="7.查看容器的运行日志"></a>7.查看容器的运行日志</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker logs [OPTIONS] 容器id或容器名	------------------ 查看容器日志</span><br><span class="line">   -t			 加入时间戳</span><br><span class="line">   -f			 跟随最新的日志打印</span><br><span class="line">   --tail 	 数字	显示最后多少条</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210104161213738.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="8-进入容器内部"><a href="#8-进入容器内部" class="headerlink" title="8.进入容器内部"></a>8.进入容器内部</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	docker exec -it 容器id|容器名 bash(命令行) ====&gt; 进入容器,并与容器内命令终端进行交互</span><br><span class="line">退出容器 exit</span><br><span class="line"></span><br><span class="line">-i		以交互模式运行容器，通常与-t一起使用</span><br><span class="line">   -t		分配一个伪终端    shell窗口   bash</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104161416349.png" alt="在这里插入图片描述"></p>
<h2 id="9-容器和宿主机之间复制文件"><a href="#9-容器和宿主机之间复制文件" class="headerlink" title="9.容器和宿主机之间复制文件"></a>9.容器和宿主机之间复制文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 文件|目录 容器id:容器路径           -----------------   将宿主机复制到容器内部</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104161541763.png" alt="在这里插入图片描述"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 容器id:容器内资源路径 宿主机目录路径  -----------------   将容器内资源拷贝到主机上</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104161518970.png" alt="在这里插入图片描述"></p>
<h2 id="10-数据卷-volum-实现与宿主机共享目录"><a href="#10-数据卷-volum-实现与宿主机共享目录" class="headerlink" title="10.数据卷(volum)实现与宿主机共享目录"></a>10.数据卷(volum)实现与宿主机共享目录</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v 宿主机的路径|任意别名:/容器内的路径 镜像名	</span><br></pre></td></tr></table></figure>
<h3 id="1-自定义数据卷"><a href="#1-自定义数据卷" class="headerlink" title="1. 自定义数据卷"></a>1. 自定义数据卷</h3><blockquote>
<p>自定义数据卷:如果是宿主机路径必须是绝对路径,宿主机目录会覆盖容器内目录内容</p>
<p><img src="https://img-blog.csdnimg.cn/20210104162143595.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210104162150974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210104162154987.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h3 id="2-自动数据卷目录"><a href="#2-自动数据卷目录" class="headerlink" title="2. 自动数据卷目录"></a>2. 自动数据卷目录</h3><blockquote>
<p>如果是别名则会在docker运行容器时自动在宿主机中创建一个目录,并将容器目录文件复制到宿主机中</p>
<p><img src="https://img-blog.csdnimg.cn/20210104162207714.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210104162210947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210104162216814.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210104162222277.png" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="11-打包镜像"><a href="#11-打包镜像" class="headerlink" title="11.打包镜像"></a>11.打包镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save 镜像名 -o  名称.tar</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104162436690.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="12-载入镜像"><a href="#12-载入镜像" class="headerlink" title="12.载入镜像"></a>12.载入镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i   名称.tar</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210104162312387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="13-容器打包成新的镜像"><a href="#13-容器打包成新的镜像" class="headerlink" title="13.容器打包成新的镜像"></a>13.容器打包成新的镜像</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m <span class="string">&quot;描述信息&quot;</span> -a <span class="string">&quot;作者信息&quot;</span>   （容器id或者名称）打包的镜像名称:标签</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210104162241191.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red' size=5>1. 直接启动新的镜像测试</font><br><img src="https://img-blog.csdnimg.cn/20210104162251550.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="三-网络配置"><a href="#三-网络配置" class="headerlink" title="三. 网络配置"></a>三. 网络配置</h1><ol>
<li><p>当 Docker 启动时，会自动在主机上创建一个 docker0 虚拟网桥，实际上是 Linux 的一个 bridge，可以理解为一个软件交换机。它会在挂载到它的网口之间进行转发。</p>
</li>
<li><p>Docker 随机分配一个本地未占用的私有网段（在 RFC1918 中定义）中的一个地址给 docker0 接口。</p>
</li>
<li><p>当创建一个 Docker 容器的时候，同时会创建了一对 veth pair 接口（当数据包发送到一个接口时，另外一个接口也可以收到相同的数据包）。这对接口一端在容器内，即 eth0；另一端在本地并被挂载到 docker0 网桥，名称以 veth 开头。通过这种方式，主机可以跟容器通信，容器之间也可以相互通信。Docker 就创建了在主机和所有容器之间一个虚拟共享网络。</p>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20210105135918158.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="1-查看网络信息"><a href="#1-查看网络信息" class="headerlink" title="1.  查看网络信息"></a>1.  查看网络信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210105135807442.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-创建一个网桥"><a href="#2-创建一个网桥" class="headerlink" title="2. 创建一个网桥"></a>2. 创建一个网桥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create -d bridge 网桥名称</span><br></pre></td></tr></table></figure>
<p><font color='red' size=5>创建网桥 -d bridge 可以省略</font><br><img src="https://img-blog.csdnimg.cn/20210105135817385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-查看网桥的详细信息"><a href="#4-查看网桥的详细信息" class="headerlink" title="4. 查看网桥的详细信息"></a>4. 查看网桥的详细信息</h2><p><img src="https://img-blog.csdnimg.cn/20210105140646687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210105140658707.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="3-删除一个网桥"><a href="#3-删除一个网桥" class="headerlink" title="3. 删除一个网桥"></a>3. 删除一个网桥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network rm 网桥名称</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210105135836553.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-容器之前使用网络通信"><a href="#4-容器之前使用网络通信" class="headerlink" title="4. 容器之前使用网络通信"></a>4. 容器之前使用网络通信</h2><h3 id="1-启动Tomcat容器指定使用网桥"><a href="#1-启动Tomcat容器指定使用网桥" class="headerlink" title="1.启动Tomcat容器指定使用网桥"></a>1.启动Tomcat容器指定使用网桥</h3><ul>
<li><font color='red' >这里使用Tomcat容器来测试</font></li>
<li><font color='red'>注意:使用dockerrun指定–network网桥时网桥必须存在</font></li>
<li><font color='red' >注意:一旦指定网桥后–name指定名字就是主机名,多个容器指定在同一个网桥时,可以在任意一个容器中使用主机名与容器进行互通</font></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">8080</span>:<span class="number">8080</span> --name tomcat --network ems tomcat:<span class="number">8.0</span>-jre8-slim</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="https://img-blog.csdnimg.cn/20210105140257956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="2-在自定义网桥上创建两个Tomcat容器测试通信"><a href="#2-在自定义网桥上创建两个Tomcat容器测试通信" class="headerlink" title="2.在自定义网桥上创建两个Tomcat容器测试通信"></a>2.在自定义网桥上创建两个Tomcat容器测试通信</h3><p><font color='red' >可以查看当前网桥上容器的信息</font><br><img src="https://img-blog.csdnimg.cn/20210105140807110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-测试"><a href="#3-测试" class="headerlink" title="3. 测试"></a>3. 测试</h3><p><font color='red' >我这Tomcat容器没有装curl命令，执行无效</font><br><img src="https://img-blog.csdnimg.cn/2021010514213826.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><font color='red' >我就在宿主机上测试一下，看一下效果</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl http:<span class="comment">//192.168.153.170:8080</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210105141601698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四-数据卷配置"><a href="#四-数据卷配置" class="headerlink" title="四. 数据卷配置"></a>四. 数据卷配置</h1><p>数据卷是一个可供一个或多个容器使用的特殊目录</p>
<ul>
<li>数据卷 可以在容器之间共享和重用</li>
<li>对 数据卷 的修改会立马生效</li>
<li>对 数据卷 的更新，不会影响镜像</li>
<li>数据卷 默认会一直存在，即使容器被删除</li>
</ul>
<p>注意：数据卷 的使用，类似于 Linux 下对目录或文件进行 mount，镜像中的被指定为挂载点的目录中的文件会复制到数据卷中（仅数据卷为空时会复制）。</p>
<h2 id="1-创建数据卷"><a href="#1-创建数据卷" class="headerlink" title="1.创建数据卷"></a>1.创建数据卷</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker volume create 数据卷名称/id</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210105142939611.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-查看全部数据卷"><a href="#2-查看全部数据卷" class="headerlink" title="2.查看全部数据卷"></a>2.查看全部数据卷</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>

<p> <img src="https://img-blog.csdnimg.cn/20210105142929213.png" alt="在这里插入图片描述"></p>
<h2 id="3-查看数据卷详细信息"><a href="#3-查看数据卷详细信息" class="headerlink" title="3.查看数据卷详细信息"></a>3.查看数据卷详细信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect 数据卷名称/id     </span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210105143057291.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-启动容器使用数据卷"><a href="#4-启动容器使用数据卷" class="headerlink" title="4.启动容器使用数据卷"></a>4.启动容器使用数据卷</h2><h3 id="1-宿主机和容器两边共享"><a href="#1-宿主机和容器两边共享" class="headerlink" title="1. 宿主机和容器两边共享"></a>1. 宿主机和容器两边共享</h3><p><img src="https://img-blog.csdnimg.cn/20210105143200818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red'>测试共享—-容器中创建目录</font><br><img src="https://img-blog.csdnimg.cn/20210105143557163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><font color='red'>测试共享—-宿主机只能生成共享文件</font><br><img src="https://img-blog.csdnimg.cn/20210105143551882.png" alt="在这里插入图片描述"></p>
<h3 id="2-设置容器这边只能读权限"><a href="#2-设置容器这边只能读权限" class="headerlink" title="2. 设置容器这边只能读权限"></a>2. 设置容器这边只能读权限</h3><p><font color='red'>在容器路径后面追加 :ro</font><br><img src="https://img-blog.csdnimg.cn/20210105143318853.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210105143329128.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-删除数据卷"><a href="#4-删除数据卷" class="headerlink" title="4. 删除数据卷"></a>4. 删除数据卷</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm 数据卷名称/id</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210105143523659.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume prune</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210105143453239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="五-Dockerfile解释"><a href="#五-Dockerfile解释" class="headerlink" title="五 . Dockerfile解释"></a>五 . Dockerfile解释</h1><ol>
<li>Dockerfile可以认为是Docker镜像的描述文件，是由一系列命令和参数构成的脚本。主要作用是用来构建docker镜像的构建文件。DockerFile可以直接构建镜像。<br><img src="https://img-blog.csdnimg.cn/2021010708212456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ol>
<h2 id="1-Dockerfile解析过程图"><a href="#1-Dockerfile解析过程图" class="headerlink" title="1 . Dockerfile解析过程图"></a>1 . Dockerfile解析过程图</h2><p><img src="https://img-blog.csdnimg.cn/20210107082229702.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-Dockerfile的保留命令"><a href="#2-Dockerfile的保留命令" class="headerlink" title="2. Dockerfile的保留命令"></a>2. Dockerfile的保留命令</h2><h3 id="1-FROM"><a href="#1-FROM" class="headerlink" title="1.  FROM"></a>1.  FROM</h3><p>基于那个镜像进行构建新的镜像,在构建时会自动从docker hub拉取base镜像 必须作为Dockerfile的第一个指令出现  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM  &lt;image&gt;</span><br><span class="line">FROM  &lt;image&gt;[:&lt;tag&gt;]     使用版本不写为latest</span><br><span class="line">FROM  &lt;image&gt;[@&lt;digest&gt;]  使用摘要</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210107084140556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="2-MAINTAINER"><a href="#2-MAINTAINER" class="headerlink" title="2.   MAINTAINER"></a>2.   MAINTAINER</h3><p>镜像维护者的姓名和邮箱地址[废弃]  —不演示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MAINTAINER &lt;name&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-RUN"><a href="#3-RUN" class="headerlink" title="3.  RUN"></a>3.  RUN</h3><p>RUN指令将在当前映像之上的新层中执行任何命令并提交结果。生成的提交映像将用于Dockerfile中的下一步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命令形式</span></span><br><span class="line">RUN &lt;command&gt; </span><br><span class="line"><span class="comment">//数组形式</span></span><br><span class="line">RUN [<span class="string">&quot;executable&quot;</span>, <span class="string">&quot;param1&quot;</span>, <span class="string">&quot;param2&quot;</span>] </span><br></pre></td></tr></table></figure>


<p>   <font color='red'>进入容器都是没有Vim编辑命名，我们使用RUN命令自动创建</font><br><img src="https://img-blog.csdnimg.cn/20210107084427118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red'>使用普通形式运行命令</font><br><img src="https://img-blog.csdnimg.cn/2021010708443696.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><font color='red'>使用数组形式运行命令</font><br><img src="https://img-blog.csdnimg.cn/20210107085301599.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><font color='red'>RUN 使用yum直接报错</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Could not retrieve mirrorlist http:<span class="comment">//mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=os&amp;infra=container error was</span></span><br><span class="line"><span class="number">12</span>: Timeout on http:<span class="comment">//mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=os&amp;infra=container: (28, &#x27;Resolving timed out after 30566 milliseconds&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> One of the configured repositories <span class="title function_">failed</span> <span class="params">(Unknown)</span>,</span><br><span class="line"> and yum doesn<span class="string">&#x27;t have enough cached data to continue. At this point the only</span></span><br><span class="line"><span class="string"> safe thing yum can do is fail. There are a few ways to work &quot;fix&quot; this:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     1. Contact the upstream for the repository and get them to fix the problem.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     2. Reconfigure the baseurl/etc. for the repository, to point to a working</span></span><br><span class="line"><span class="string">        upstream. This is most often useful if you are using a newer</span></span><br><span class="line"><span class="string">        distribution release than is supported by the repository (and the</span></span><br><span class="line"><span class="string">        packages for the previous distribution release still work).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     3. Run the command with the repository temporarily disabled</span></span><br><span class="line"><span class="string">            yum --disablerepo=&lt;repoid&gt; ...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     4. Disable the repository permanently, so yum won&#x27;</span>t use it by <span class="keyword">default</span>. Yum</span><br><span class="line">        will then just ignore the repository until you permanently enable it</span><br><span class="line">        again or use --enablerepo <span class="keyword">for</span> temporary usage:</span><br><span class="line"></span><br><span class="line">            yum-config-manager --disable &lt;repoid&gt;</span><br><span class="line">        or</span><br><span class="line">            subscription-manager repos --disable=&lt;repoid&gt;</span><br><span class="line"></span><br><span class="line">     <span class="number">5.</span> Configure the failing repository to be skipped, <span class="keyword">if</span> it is unavailable.</span><br><span class="line">        Note that yum will <span class="keyword">try</span> to contact the repo. when it runs most commands,</span><br><span class="line">        so will have to <span class="keyword">try</span> and fail each <span class="title function_">time</span> <span class="params">(and thus. yum will be be much</span></span><br><span class="line"><span class="params">        slower)</span>. If it is a very temporary problem though, <span class="built_in">this</span> is often a nice</span><br><span class="line">        compromise:</span><br><span class="line"></span><br><span class="line">            yum-config-manager --save --setopt=&lt;repoid&gt;.skip_if_unavailable=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">Cannot find a valid baseurl <span class="keyword">for</span> repo: base/<span class="number">7</span>/x86_64</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210107084442951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>   <font color='red'>解决方案修改resolv.conf配置文件</font><br><img src="https://img-blog.csdnimg.cn/20210107084504137.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210107084507666.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>   <font color='red'>再次运行Dockerfile，Vim安装成功</font><br><img src="https://img-blog.csdnimg.cn/20210107084522744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red'>进入容器测试Vim命令</font><br><img src="https://img-blog.csdnimg.cn/20210107084538487.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="4-EXPOSE"><a href="#4-EXPOSE" class="headerlink" title="4. EXPOSE"></a>4. EXPOSE</h3><p>用来指定构建的镜像在运行为容器时对外暴露的端口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE <span class="number">80</span>/tcp  如果没有显示指定则默认暴露都是tcp</span><br><span class="line">EXPOSE <span class="number">80</span>/udp</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210107085550238.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="5-WORKDIR"><a href="#5-WORKDIR" class="headerlink" title="5.WORKDIR"></a>5.WORKDIR</h3><p>用来为Dockerfile中的任何RUN、CMD、ENTRYPOINT、COPY和ADD指令设置工作目录。如果WORKDIR不存在，即使它没有在任何后续Dockerfile指令中使用，它也将被创建。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR /path/to/workdir</span><br><span class="line"></span><br><span class="line">WORKDIR /a</span><br><span class="line">WORKDIR b</span><br><span class="line">WORKDIR c</span><br><span class="line">注意:WORKDIR指令可以在Dockerfile中多次使用。如果提供了相对路径，则该路径将与先前WORKDIR指令的路径相对</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210107085556923.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210107085606964.png" alt="在这里插入图片描述"></p>
<h3 id="7-ADD"><a href="#7-ADD" class="headerlink" title="7.   ADD"></a>7.   ADD</h3><p>用来从context上下文复制新文件、目录或远程文件url，并将它们添加到位于指定路径的映像文件系统中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ADD hom* /mydir/       通配符添加多个文件</span><br><span class="line">ADD hom?.txt /mydir/   通配符添加</span><br><span class="line">ADD test.txt relativeDir/  可以指定相对路径</span><br><span class="line">ADD test.txt /absoluteDir/ 也可以指定绝对路径</span><br><span class="line">ADD url </span><br></pre></td></tr></table></figure>
<h4 id="1-测试ADD复制文件"><a href="#1-测试ADD复制文件" class="headerlink" title="1. 测试ADD复制文件"></a>1. 测试ADD复制文件</h4><p><img src="https://img-blog.csdnimg.cn/20210107085755635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2021010708580498.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="2-测试ADD命令URL自动下载和解压tar"><a href="#2-测试ADD命令URL自动下载和解压tar" class="headerlink" title="2. 测试ADD命令URL自动下载和解压tar"></a>2. 测试ADD命令URL自动下载和解压tar</h4><p><font color='red'>1. Dockerfile直接ADD后放下载地址</font><br><img src="https://img-blog.csdnimg.cn/20210107085810132.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210107090342982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red'>2. 宿主机下载安装包,ADD直接拷贝&#x2F;解压—测试</font><br><img src="https://img-blog.csdnimg.cn/20210107090348341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210107090351970.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210107090356369.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210107090402346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>   <font color='red'>3. 修改文件的名称使用RUN</font><br><img src="https://img-blog.csdnimg.cn/20210107090417968.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210107090430483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="8-ENV"><a href="#8-ENV" class="headerlink" title="8.   ENV"></a>8.   ENV</h3><p>用来为构建镜像设置环境变量。这个值将出现在构建阶段中所有后续指令的环境中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ENV &lt;key&gt; &lt;value&gt;</span><br><span class="line">ENV &lt;key&gt;=&lt;value&gt; ...</span><br></pre></td></tr></table></figure>

<p><font color='red'>将出现多次的路径设置成公共变量–$直接使用</font><br><img src="https://img-blog.csdnimg.cn/2021010709124341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210107091248120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="9-COPY"><a href="#9-COPY" class="headerlink" title="9.   COPY"></a>9.   COPY</h3><p>用来将context目录中指定文件复制到镜像的指定目录中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY src dest</span><br><span class="line">COPY [<span class="string">&quot;&lt;src&gt;&quot;</span>,... <span class="string">&quot;&lt;dest&gt;&quot;</span>]</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210107085709662.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210107085647200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="10-VOLUME"><a href="#10-VOLUME" class="headerlink" title="10.   VOLUME"></a>10.   VOLUME</h3><p>容器数据卷，用于数据保存和持久化工作      </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VOLUME /data</span><br><span class="line"><span class="comment">//数组形式</span></span><br><span class="line">VOLUME [<span class="string">&quot;/data&quot;</span>]</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210107091224569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><font color='red'>启动Docker构建成的镜像，测试文件共享</font><br><img src="https://img-blog.csdnimg.cn/20210107091230318.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="11-ENTRYPOINT"><a href="#11-ENTRYPOINT" class="headerlink" title="11.   ENTRYPOINT"></a>11.   ENTRYPOINT</h3><p>指定一个容器启动时要运行的命令，ENTRYPOINT指令，往往用于设置容器启动后的第一个命令，这对一个容器来说往往是固定的。<br><img src="https://img-blog.csdnimg.cn/20210107091311183.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p> <img src="https://img-blog.csdnimg.cn/2021010709132349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="12-CMD"><a href="#12-CMD" class="headerlink" title="12.   CMD"></a>12.   CMD</h3><ol>
<li>用来为启动的容器指定执行的命令,在Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。</li>
<li>Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。</li>
<li>CMD指令，往往用于设置容器启动的第一个命令的默认参数，这对一个容器来说可以是变化的。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命令形式</span></span><br><span class="line">CMD command param1 param2 </span><br><span class="line"><span class="comment">//数组形式</span></span><br><span class="line">CMD [<span class="string">&quot;executable&quot;</span>,<span class="string">&quot;param1&quot;</span>,<span class="string">&quot;param2&quot;</span>] </span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210107091333242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210107091339777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><font color='red'>cmd直接覆盖命令</font><br><img src="https://img-blog.csdnimg.cn/2021010709134577.png" alt="在这里插入图片描述"><br><font color='red'>entrypoint指定参数覆盖命令</font><br><img src="https://img-blog.csdnimg.cn/20210107091351382.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><font color='red'>entrypoint和cmd配合使用</font><br><img src="https://img-blog.csdnimg.cn/20210107091410204.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210107091400352.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTQ4MDc4NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>​                </p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1a42f082b0648ed856d2655ed994b56~tplv-k3u1fbpfcp-watermark.image?" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/05/Docker_Compose/"><img class="prev-cover" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4e5db19983c4d95a898aa81503bada1~tplv-k3u1fbpfcp-watermark.image?" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Docker Compose</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/07/%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/"><img class="next-cover" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61ece42fda9244c7bb45e19b9db7ba64~tplv-k3u1fbpfcp-watermark.image?" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法板子</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NjYzMi8zMzA5NQ=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-Docker%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">一. Docker镜像操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8Bdocker%E5%BC%95%E6%93%8E%E4%BB%A5%E5%8F%8Adocker%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">1.查看docker引擎以及docker帮助命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E6%9C%AC%E6%9C%BA%E4%B8%AD%E6%89%80%E6%9C%89%E9%95%9C%E5%83%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2.查看本机中所有镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F"><span class="toc-number">1.3.</span> <span class="toc-text">3.搜索镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BB%8E%E4%BB%93%E5%BA%93%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F"><span class="toc-number">1.4.</span> <span class="toc-text">4.从仓库下载镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"><span class="toc-number">1.5.</span> <span class="toc-text">5.删除镜像</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">二.容器相关操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">1.运行容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2.查看运行的容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%81%9C%E6%AD%A2-%E5%85%B3%E9%97%AD-%E9%87%8D%E5%90%AF%E5%AE%B9%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">3.停止|关闭|重启容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-number">2.4.</span> <span class="toc-text">4.删除容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%86%85%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.5.</span> <span class="toc-text">5.查看容器内进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%9F%A5%E7%9C%8B%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E7%BB%86%E8%8A%82"><span class="toc-number">2.6.</span> <span class="toc-text">6.查看查看容器内部细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97"><span class="toc-number">2.7.</span> <span class="toc-text">7.查看容器的运行日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8"><span class="toc-number">2.8.</span> <span class="toc-text">8.进入容器内部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%AE%B9%E5%99%A8%E5%92%8C%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%B9%8B%E9%97%B4%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6"><span class="toc-number">2.9.</span> <span class="toc-text">9.容器和宿主机之间复制文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%95%B0%E6%8D%AE%E5%8D%B7-volum-%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95"><span class="toc-number">2.10.</span> <span class="toc-text">10.数据卷(volum)实现与宿主机共享目录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">2.10.1.</span> <span class="toc-text">1. 自定义数据卷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%87%AA%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%8D%B7%E7%9B%AE%E5%BD%95"><span class="toc-number">2.10.2.</span> <span class="toc-text">2. 自动数据卷目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%89%93%E5%8C%85%E9%95%9C%E5%83%8F"><span class="toc-number">2.11.</span> <span class="toc-text">11.打包镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%BD%BD%E5%85%A5%E9%95%9C%E5%83%8F"><span class="toc-number">2.12.</span> <span class="toc-text">12.载入镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E5%AE%B9%E5%99%A8%E6%89%93%E5%8C%85%E6%88%90%E6%96%B0%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">2.13.</span> <span class="toc-text">13.容器打包成新的镜像</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">三. 网络配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="toc-number">3.1.</span> <span class="toc-text">1.  查看网络信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E6%A1%A5"><span class="toc-number">3.2.</span> <span class="toc-text">2. 创建一个网桥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E7%BD%91%E6%A1%A5%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-number">3.3.</span> <span class="toc-text">4. 查看网桥的详细信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E7%BD%91%E6%A1%A5"><span class="toc-number">3.4.</span> <span class="toc-text">3. 删除一个网桥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%B9%E5%99%A8%E4%B9%8B%E5%89%8D%E4%BD%BF%E7%94%A8%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="toc-number">3.5.</span> <span class="toc-text">4. 容器之前使用网络通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8Tomcat%E5%AE%B9%E5%99%A8%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8%E7%BD%91%E6%A1%A5"><span class="toc-number">3.5.1.</span> <span class="toc-text">1.启动Tomcat容器指定使用网桥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9C%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E6%A1%A5%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AATomcat%E5%AE%B9%E5%99%A8%E6%B5%8B%E8%AF%95%E9%80%9A%E4%BF%A1"><span class="toc-number">3.5.2.</span> <span class="toc-text">2.在自定义网桥上创建两个Tomcat容器测试通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95"><span class="toc-number">3.5.3.</span> <span class="toc-text">3. 测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-%E6%95%B0%E6%8D%AE%E5%8D%B7%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">四. 数据卷配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">4.1.</span> <span class="toc-text">1.创建数据卷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">4.2.</span> <span class="toc-text">2.查看全部数据卷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%8D%B7%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-number">4.3.</span> <span class="toc-text">3.查看数据卷详细信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">4.4.</span> <span class="toc-text">4.启动容器使用数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%BF%E4%B8%BB%E6%9C%BA%E5%92%8C%E5%AE%B9%E5%99%A8%E4%B8%A4%E8%BE%B9%E5%85%B1%E4%BA%AB"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 宿主机和容器两边共享</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%BE%E7%BD%AE%E5%AE%B9%E5%99%A8%E8%BF%99%E8%BE%B9%E5%8F%AA%E8%83%BD%E8%AF%BB%E6%9D%83%E9%99%90"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 设置容器这边只能读权限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">4.5.</span> <span class="toc-text">4. 删除数据卷</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-Dockerfile%E8%A7%A3%E9%87%8A"><span class="toc-number">5.</span> <span class="toc-text">五 . Dockerfile解释</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Dockerfile%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B%E5%9B%BE"><span class="toc-number">5.1.</span> <span class="toc-text">1 . Dockerfile解析过程图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Dockerfile%E7%9A%84%E4%BF%9D%E7%95%99%E5%91%BD%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">2. Dockerfile的保留命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-FROM"><span class="toc-number">5.2.1.</span> <span class="toc-text">1.  FROM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MAINTAINER"><span class="toc-number">5.2.2.</span> <span class="toc-text">2.   MAINTAINER</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-RUN"><span class="toc-number">5.2.3.</span> <span class="toc-text">3.  RUN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-EXPOSE"><span class="toc-number">5.2.4.</span> <span class="toc-text">4. EXPOSE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-WORKDIR"><span class="toc-number">5.2.5.</span> <span class="toc-text">5.WORKDIR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ADD"><span class="toc-number">5.2.6.</span> <span class="toc-text">7.   ADD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B5%8B%E8%AF%95ADD%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6"><span class="toc-number">5.2.6.1.</span> <span class="toc-text">1. 测试ADD复制文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%B5%8B%E8%AF%95ADD%E5%91%BD%E4%BB%A4URL%E8%87%AA%E5%8A%A8%E4%B8%8B%E8%BD%BD%E5%92%8C%E8%A7%A3%E5%8E%8Btar"><span class="toc-number">5.2.6.2.</span> <span class="toc-text">2. 测试ADD命令URL自动下载和解压tar</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-ENV"><span class="toc-number">5.2.7.</span> <span class="toc-text">8.   ENV</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-COPY"><span class="toc-number">5.2.8.</span> <span class="toc-text">9.   COPY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-VOLUME"><span class="toc-number">5.2.9.</span> <span class="toc-text">10.   VOLUME</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-ENTRYPOINT"><span class="toc-number">5.2.10.</span> <span class="toc-text">11.   ENTRYPOINT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-CMD"><span class="toc-number">5.2.11.</span> <span class="toc-text">12.   CMD</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1a42f082b0648ed856d2655ed994b56~tplv-k3u1fbpfcp-watermark.image?')"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !true) {
  if (true) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>